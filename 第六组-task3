web
===
1. 引言
1.1.目的
    目前人们越来越不满足于在客户端-服务端应用程序提供单一功能和单一界面，并且当服务端更新时客户端也需要更新。这不仅占有本地系统资源，还......webqq便是基于这种形式下开发的。Webqq不需要安装QQ的任何组件，只需要一个浏览器和QQ账号就可以获得与QQ一致的聊天功能。Webqq提供炫酷的画面背景和超快的用户体验。最主要的是webqq提供有限制的内存资源，使用者可以使用该资源在云端安装自己喜欢的应用，这使得webqq不局限与通信，通过webqq可以与类操作系统一般，极大地扩展了webqq的功能。
在兼容性方面，Q+ Web不仅可以在window系统使用，还兼容因免费而广受企业欢迎的Linux系统。除IE外，Q+ Web也兼容Google Chrome/Opera/Firefox等主流浏览器。

1.2.背景
    随着云计算技术的日益成熟，人们可以通过网络获得服务器提供的资源，从而摆脱本地资源有限的。webQQ便是基于云计算技术发展而来，使用者无需在本地安装QQ,只需要打开浏览器，在网页中进行聊天。同时webQQ而具备QQ所不具备的添加应用，免费资源等一系列功能。
1.3.参考资料
  1.基于云计算平台Enomalism 开放源代码项目，搭建云计算平台。
  2.借鉴了目前云计算视频系统开发中的通信技术，搭建客户端和云计算的交互。

1.4.术语
    云计算，云端，客户端，分布式计算。


2.任务目标
  首先实现了webqq的基本功能：
  消息盒子：
  好友留言、群讨论、系统消息和邮件等让你一目了然，轻松进行信息管理。
  消息提示：
  在线消息提示在中间，让用户更一目了然。
  好有近况：
  好友签名、好友印象、好友日志等最新变化，你都可以第一时间知道。
  好有印象：
  可以描绘你我心中的那个TA，展示每个人另类的一面。
  增加功能有：
  QQ音乐等常用软件在web云端已经安装浏览网页
  推荐、收藏、自定义，你可以随时浏览你感兴趣的资讯。
   WebQQ还为大家提供了强大的网页聊天功能，其中包括了自定义表情、传输文件、聊天消息漫游双模式聊天窗口、灵活等，让你聊天轻松自如！QQ云存储
在云端获得一定的存储空间，你可以像本地资源一样存储资源安装软件


3.功能介绍
3.1 用户功能介绍 
  3.1.1. 注册/登录 
      首先用户进行用户信息注册，注册的用户需要进行信息验证，保证用户账号的安全性。 打开网页时，首先弹出注册\登录界面，用户需要输入用户名和密码，点击注册或登录键，系统会根据用户的点击执行相应的操作。 
	可能会有以下几种情况发生：1、如果用户选择的是注册操作，服务器读取注册信息，并对用户名和密码进行记录，返回注册成功的消息，并要求用户重新输入用户名和密码进行注册。 2、如果用户选择的是登录操作，服务器读取登录信息，并与数据库中的用户名和密码进行比较，如果信息正确，则返回登录成功的消息，并显示远程控制主界面，如果信息错误，则返回登录错误的消息，并要求用户重新输入用户名和密码。 
  3.1.2. 查找、添加、删除好友 
	    用户点击查找按钮，输入想搜索网友的账号或昵称，服务器读取数据库中的用户名和号码，进行比较，如果数据库中没有相关人员信息，则返回空，并提醒用户更换网友呢称或账号，重新搜索；如果存在，则返回相应的网友信息，用户可以将发出添加为好友请求，等待 对方的响应。对方接收到你的添加请求时，他有三种操作：1.接受你的请求，并添加你为他的好友，此时你们互为好友2.接受你的请求，但不添加你为好友，此时对方出现在你的好友列表中，但你不在对方的好友列表中3.拒绝你的请求，此时你们没有好友关系。在好友头像上点击右键，弹出菜单，选择删除好友，即将此人从好友列表中删除。
  3.1.3. 好友之间文本聊天 
      双击好友头像，可以实现好友之间的即时聊天功能，包括发送文字、表情和图片；在文本聊天窗口，用户可以对输入的文本格式修改。 
  3.1.4. 好友之间语音、视频聊天 
      好友之间能进行语音、视频聊天，用户点击相关图标可开启视频、语言聊天功能。一方开启后等待另一方的连接。连接有以下几种情况： 1、对方同意连接，则双方实现视频、语言连接。2、如果对方拒绝连接，则连接失败，跳回文本聊天主界面。3、如果对方无反应，则等待10秒后系统自动断开你的请求。 
  3.1.5. 群内聊天 
	    用户双击已加入的群，可以实现多人同时聊天，包括发送文字、表情和图片。其他加入该群的成员可以看到此消息，并回复。 
  3.1.6. 创建群及讨论组
      用户可以选择创建一个群\讨论组，可以将已有好友直接加入讨论组，将好友加入群中需要得到对方同意，若对方同意则添加成功，否则添加失败。同时，群的创建人还可以处理别人的群加入请求，若接受则将对方加入本群中否则对方加入失败。
  3.1.7. 文件传输 
      用户可以向好友发送文件，这个过程会有如下几种可能的操作情况发生： 1.如果好友不在线时，用户应该发送离线文件 2.如果好友在线，用户首先向对方发传送输请求，对方可能有多种反应：一是拒绝请求，则服务器端会给用户发送拒绝消息，发送请求失败；二是接受请求，则用户就能够传输相对应的文件；三是对方无应答，此时应该有自动重发请求消息的功能，在10S后重新发送请求消息。 
  3.1.8. 找回密码 
      用户忘记密码后，点击登陆界面的找回密码按钮，进入找回密码界面。系统要求用户填写，注册时设置的密保问题，如果用户能正确回答问题，系统告诉用户的账号密码。 

3.2. 管理员功能介绍 
   3.2.1. 登陆 
      admin是系统默认的管理员账号，密码是admin。在登陆界面， 管理员输入账号和密码，服务器读取登录信息，并与数据库中的账号和密码进行比较，如果信息正确，则返回登录成功的消息，进入管理主界面，如果信息错误，则返回登录错误的消息，并要求用户重新输入用户名和密码。 
   3.2.2 监听用户聊天 
      在管理主界面，显示所有注册的用户。管理员双击正在聊天的用户，可以查看普通用户的聊天内容；如果发现聊天内容有敏感词汇或不良信息，管理员向聊天用户发送警告；如果在发出警告后，普通用户继续发送不良信息，管理员可以强行终止此次聊天。 
   3.2.3. 冻结普通用户账号 
      当普通用户多次发送不良信息或敏感词汇时，管理员有权冻结该账号。在一段时间内，该用户无法登陆该账号，但账号和个人信息仍然保存。过了冻结期，系统自动解冻该账号，用户重新拥有该账号的所有权，能进行冻结前的所有操作。 


4.对性能的规定
  4.1.对兼容性的要求：QQ Web不仅可以在window系统使用，还兼容因免费而广受企业推广的Linux系统。除IE外，QQWeb也兼容Google Chrome/Opera/Firefox等主流浏览器。
  4.2.对恢复性的要求：当出现一些错误操作时，例如删除一些重要的信息，此时可以对删除的信息进行恢复，只要在回收站里还原即可。
  4.3.对存储性的要求：当用户发送离线消息的时候，系统对发送的消息进行存储，保证信息不会丢失。
  4.4.对于安全性能的要求：安全机制是这次作为首要因素考虑的，为vhttp协议传输，消息加密，本地加密，密码安全都做了保障。


5.运行环境规定
  5.1.设备基于任何平台的操作系统:WinXP/Win7  SP2	简体中文
  5.2.支撑软件浏览器
  5.3.接口TCP/ip协议，
  5.4.数据库平台	Oracle	9i以上	英文


6. 数据字典

    manager管理员表
    
    字段名  字段说明	数据类型	字段约束	备注
    M_ID	管理人员ID	Number	主键	
    M_NAME	管理人员姓名	Varchar2(15)		非空
    M_PWD	管理人员密码	Varchar2(15)		非空
    M_ISDEL	是否注销	Number(10)		1为注销
    
    user用户信息表
    
    字段名	字段说明	数据类型	字段约束	备注
    U_ID	用户ID	Number	主键	
    U_FORSHORT	用户昵称	Varchar(20)		
    
    U_PWD	用户密码	Varchar(20)		
    U_EMAIL	用户EMAIL	Varchar(20)		
    U_SEX	用户性别	Varchar(10)		
    U_AGE	用户年龄	Number		
    U_BIRTHDAY	用户生日	Varchar(20)		
    U_ISONLINE	是否在线	Number		
    U_HOBBY	爱好	Varchar(50)		
    U_CAPPATH	头像路径	Varchar(30)		
    
    resource资源表
    
    字段名	字段说明	数据类型	字段约束	备注
    R_ID	资源ID	Number	主键	
    R_ALBUN	资源所属相册	Varchar(50)		
    R_ADDRESS	照片地址	Varchar(50)		
    R_ISDEL	是否删除	Number		
    
    photo相册表
    
    字段名	字段说明	数据类型	字段约束	备注
    P_id	相册id	Number	主键	
    P_name	相册名	Varchar2(50)		
    P_uid	资源用户id	number		
    P_isdel	是否删除	number		
    
    comment评论表
    
    字段名	字段说明	数据类型	字段约束	备注
    C_ID	评论ID	Number	主键	
    C_RID	相片ID	number		
    C_LID	日志ID	number		
    C_SID	说说ID	number		
    C_FIRSTUSER	被评论人ID	number		
    C_SECONDUSER	评论人ID	number		
    C_CONTENT	评论内容	Varchar(500)		
    C_DATE	评论时间	Varchar(20)		
    C_ISDEL	是否删除	Number		
    
    friends好友表
    
    字段名	字段说明	数据类型	字段约束	备注
    F_ID	好友ID	Number	主键	
    F_FIRSTUSER	用户	Varchar(20)		
    F_SECONDUSER	用户的好友	Varchar(20)		
    F_ISDEL	是否删除	Number		
    F_ACCEPT	是否接受	Number		
    F_ISNEW	是否是更新的	Number		
    
    visitedhistory访问记录表
    
    字段名	字段说明	数据类型	字段约束	备注
    V_ID	访问ID	Number	主键	
    V_FIRSTUSER	访问人	Varchar(20)		
    V_SECOND	被访问人	Varchar(20)		
    V_DATE	访问时间	Varchar(20)		
    
    log日志表
    
    字段名	字段说明	数据类型	字段约束	备注
    L_ID	日志ID	Number	主键	
    L_UID	日志作者	Varchar(20)		
    L_TITLE	日志标题	Varchar2(50)		
    L_CONTENT	日志内容	Varchar2(4000)		
    L_DATE	创建时间	Varchar(20)		
    L_ISDEL	是否删除	Number		
    
    saying说说表
    
    字段名	字段说明	数据类型	字段约束	备注
    S_ID	说说ID	Number	主键	
    S_UID	说说作者	Varchar(20)		
    S_CONTENT	说说内容	Varchar2(100)		
    S_DATE	说说创建时间	Varchar(20)		
    S_ISDEL	是否删除	Number		


